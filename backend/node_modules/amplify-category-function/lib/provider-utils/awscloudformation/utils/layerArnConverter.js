"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.convertLambdaLayerMetaToLayerCFNArray = void 0;
const layerParams_1 = require("./layerParams");
const convertLambdaLayerMetaToLayerCFNArray = (context, input, env) => {
    return input.map(layer => {
        if (layer.type === 'ProjectLayer') {
            if (layerParams_1.isMultiEnvLayer(context, layer.resourceName)) {
                return convertProjectLayer(layer, env);
            }
            return convertProjectLayer(layer);
        }
        return layer.arn;
    });
};
exports.convertLambdaLayerMetaToLayerCFNArray = convertLambdaLayerMetaToLayerCFNArray;
const convertProjectLayer = (layer, env) => {
    if (env) {
        return {
            'Fn::Sub': `arn:aws:lambda:\${AWS::Region}:\${AWS::AccountId}:layer:${layer.resourceName}-${env}:${layer.version}`,
        };
    }
    return {
        'Fn::Sub': `arn:aws:lambda:\${AWS::Region}:\${AWS::AccountId}:layer:${layer.resourceName}:${layer.version}`,
    };
};
//# sourceMappingURL=layerArnConverter.js.map