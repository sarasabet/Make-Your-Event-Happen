"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.saveLayerRuntimes = exports.getLayerRuntimes = void 0;
const lodash_1 = __importDefault(require("lodash"));
const path_1 = __importDefault(require("path"));
const amplify_cli_core_1 = require("amplify-cli-core");
const constants_1 = require("./constants");
const runtimesFileName = 'layer-runtimes.json';
const getLayerRuntimes = (backendDirPath, layerName) => {
    const runtimesFilePath = path_1.default.join(backendDirPath, constants_1.categoryName, layerName, runtimesFileName);
    return amplify_cli_core_1.JSONUtilities.readJson(runtimesFilePath);
};
exports.getLayerRuntimes = getLayerRuntimes;
const saveLayerRuntimes = (layerDirPath, layerName, runtimes) => {
    const runtimesFilePath = path_1.default.join(layerDirPath, runtimesFileName);
    runtimes = (runtimes || []).map(runtime => lodash_1.default.pick(runtime, 'value', 'name', 'layerExecutablePath', 'cloudTemplateValue'));
    amplify_cli_core_1.JSONUtilities.writeJson(runtimesFilePath, runtimes);
};
exports.saveLayerRuntimes = saveLayerRuntimes;
//# sourceMappingURL=layerRuntimes.js.map